<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dunlopillo Motion Bed - ì „ì²´ í˜ì´ì§€ í…ŒìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
            font-family: 'Pretendard', Arial, sans-serif;
        }
        
        .test-container {
            float: none;
            flex-shrink: 1;
            display: block;
            margin: 160px 0px 0px;
            inset: 0px;
            position: relative;
            overflow: visible;
            box-sizing: border-box;
            width: 1464px;
            height: 2904px;
            padding: 0px 0px 1936px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .page-preview {
            width: 100%;
            height: 800px;
            margin-bottom: 40px;
            border: 2px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            background: #fff;
        }
        
        .page-header {
            background: #18306c;
            color: white;
            padding: 15px 20px;
            font-weight: bold;
            font-size: 18px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .page-content {
            width: 1280px;
            height: 800px;
            transform-origin: top left;
            transform: scale(0.85);
            position: relative;
            overflow: hidden;
        }
        
        .page-content .screen-container {
            width: 1280px;
            height: 800px;
            position: relative;
        }
        
        .navigation {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            max-height: 80vh;
            overflow-y: auto;
            width: 250px;
        }
        
        .navigation h3 {
            margin: 0 0 15px 0;
            color: #18306c;
            font-size: 16px;
        }
        
        .nav-item {
            display: block;
            padding: 8px 12px;
            margin: 4px 0;
            color: #333;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.2s;
            font-size: 14px;
        }
        
        .nav-item:hover {
            background: #f0f0f0;
            color: #18306c;
        }
        
        .nav-item.active {
            background: #18306c;
            color: white;
        }
        
        .test-controls {
            background: #fff;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-controls h2 {
            margin: 0 0 15px 0;
            color: #18306c;
        }
        
        .control-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .btn-primary {
            background: #18306c;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2d4a8c;
        }
        
        .btn-secondary {
            background: #6b7280;
            color: white;
        }
        
        .btn-secondary:hover {
            background: #4b5563;
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-success {
            background: #dcfce7;
            color: #166534;
        }
        
        .status-error {
            background: #fef2f2;
            color: #dc2626;
        }
        
        .loading {
            opacity: 0.7;
            pointer-events: none;
        }
        
        .error-message {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #dc2626;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="navigation">
        <h3>ğŸ“± í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜</h3>
        <a href="#home" class="nav-item" data-page="home">ğŸ  í™ˆ í™”ë©´</a>
        <a href="#page1" class="nav-item" data-page="page1">1ï¸âƒ£ ì„¤ë¬¸ì¡°ì‚¬</a>
        <a href="#page2" class="nav-item" data-page="page2">2ï¸âƒ£ ì¹¨ëŒ€ ì†Œê°œ</a>
        <a href="#page3" class="nav-item" data-page="page3">3ï¸âƒ£ ì²´í˜• ì¸¡ì •</a>
        <a href="#page4" class="nav-item" data-page="page4">4ï¸âƒ£ ìì„¸ ì•ˆë‚´</a>
        <a href="#page5" class="nav-item" data-page="page5">5ï¸âƒ£ ë³„ì  í‰ê°€ 1</a>
        <a href="#page6" class="nav-item" data-page="page6">6ï¸âƒ£ íŒ 1</a>
        <a href="#page7" class="nav-item" data-page="page7">7ï¸âƒ£ ì²´í—˜ ì•ˆë‚´</a>
        <a href="#page8" class="nav-item" data-page="page8">8ï¸âƒ£ ë³„ì  í‰ê°€ 2</a>
        <a href="#page9" class="nav-item" data-page="page9">9ï¸âƒ£ íŒ 2</a>
        <a href="#page10" class="nav-item" data-page="page10">ğŸ”Ÿ ìˆ˜ë©´ ìì„¸</a>
        <a href="#page11" class="nav-item" data-page="page11">1ï¸âƒ£1ï¸âƒ£ ì²´í—˜ ì‹œê°„</a>
        <a href="#page12" class="nav-item" data-page="page12">1ï¸âƒ£2ï¸âƒ£ ë³„ì  í‰ê°€ 3</a>
        <a href="#page13" class="nav-item" data-page="page13">1ï¸âƒ£3ï¸âƒ£ ì œë¡œì§€ ê¸°ëŠ¥</a>
        <a href="#page14" class="nav-item" data-page="page14">1ï¸âƒ£4ï¸âƒ£ íŒ 3</a>
        <a href="#page15" class="nav-item" data-page="page15">1ï¸âƒ£5ï¸âƒ£ ëª¨ì…˜ë² ë“œ ì†Œê°œ</a>
        <a href="#page16-1" class="nav-item" data-page="page16-1">1ï¸âƒ£6ï¸âƒ£-1ï¸âƒ£ íŒ 4</a>
        <a href="#page16-2" class="nav-item" data-page="page16-2">1ï¸âƒ£6ï¸âƒ£-2ï¸âƒ£ íŒ 5</a>
        <a href="#page17" class="nav-item" data-page="page17">1ï¸âƒ£7ï¸âƒ£ ììœ  ì²´í—˜</a>
        <a href="#page18" class="nav-item" data-page="page18">1ï¸âƒ£8ï¸âƒ£ ìµœì¢… í‰ê°€</a>
        <a href="#page19" class="nav-item" data-page="page19">1ï¸âƒ£9ï¸âƒ£ ì™„ë£Œ</a>
    </div>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="test-container">
        <!-- í…ŒìŠ¤íŠ¸ ì»¨íŠ¸ë¡¤ -->
        <div class="test-controls">
            <h2>ğŸ§ª Dunlopillo Motion Bed - ì „ì²´ í˜ì´ì§€ í…ŒìŠ¤íŠ¸</h2>
            <div class="control-group">
                <button class="btn btn-primary" onclick="loadAllPages()">ğŸ”„ ëª¨ë“  í˜ì´ì§€ ë¡œë“œ</button>
                <button class="btn btn-secondary" onclick="clearAllPages()">ğŸ—‘ï¸ í˜ì´ì§€ ì´ˆê¸°í™”</button>
                <button class="btn btn-secondary" onclick="testInteractions()">âš¡ ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸</button>
                <button class="btn btn-secondary" onclick="exportScreenshots()">ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· ë‚´ë³´ë‚´ê¸°</button>
                <div class="status-indicator status-success" id="loadStatus">
                    âœ… ì¤€ë¹„ ì™„ë£Œ
                </div>
            </div>
        </div>

        <!-- í˜ì´ì§€ í”„ë¦¬ë·°ë“¤ -->
        <div id="pageContainer">
            <!-- í˜ì´ì§€ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
        </div>
    </div>

    <!-- JavaScript íŒŒì¼ë“¤ -->
    <script src="survey-data-manager.js"></script>
    <script src="survey-data.js"></script>
    <script src="screens.js"></script>
    <script src="script.js"></script>

    <script>
        console.log('ğŸ§ª í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì´ˆê¸°í™” ì‹œì‘');
        
        // í˜ì´ì§€ ì •ì˜
        const pages = [
            { id: 'home', title: 'í™ˆ í™”ë©´', type: 'main' },
            { id: 'page1', title: 'ì„¤ë¬¸ì¡°ì‚¬', type: 'survey' },
            { id: 'page2', title: 'ì¹¨ëŒ€ ì†Œê°œ', type: 'info' },
            { id: 'page3', title: 'ì²´í˜• ì¸¡ì •', type: 'measurement' },
            { id: 'page4', title: 'ìì„¸ ì•ˆë‚´', type: 'guide' },
            { id: 'page5', title: 'ë³„ì  í‰ê°€ 1', type: 'rating' },
            { id: 'page6', title: 'íŒ 1', type: 'tip' },
            { id: 'page7', title: 'ì²´í—˜ ì•ˆë‚´', type: 'guide' },
            { id: 'page8', title: 'ë³„ì  í‰ê°€ 2', type: 'rating' },
            { id: 'page9', title: 'íŒ 2', type: 'tip' },
            { id: 'page10', title: 'ìˆ˜ë©´ ìì„¸', type: 'guide' },
            { id: 'page11', title: 'ì²´í—˜ ì‹œê°„', type: 'experience' },
            { id: 'page12', title: 'ë³„ì  í‰ê°€ 3', type: 'rating' },
            { id: 'page13', title: 'ì œë¡œì§€ ê¸°ëŠ¥', type: 'feature' },
            { id: 'page14', title: 'íŒ 3', type: 'tip' },
            { id: 'page15', title: 'ëª¨ì…˜ë² ë“œ ì†Œê°œ', type: 'info' },
            { id: 'page16-1', title: 'íŒ 4', type: 'tip' },
            { id: 'page16-2', title: 'íŒ 5', type: 'tip' },
            { id: 'page17', title: 'ììœ  ì²´í—˜', type: 'experience' },
            { id: 'page18', title: 'ìµœì¢… í‰ê°€', type: 'rating' },
            { id: 'page19', title: 'ì™„ë£Œ', type: 'complete' }
        ];

        // ìƒíƒœ ê´€ë¦¬
        let loadedPages = new Set();
        let currentlyLoading = false;

        // ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateStatus(message, isError = false) {
            const statusEl = document.getElementById('loadStatus');
            statusEl.textContent = message;
            statusEl.className = `status-indicator ${isError ? 'status-error' : 'status-success'}`;
        }

        // í˜ì´ì§€ ì»¨í…Œì´ë„ˆ ì´ˆê¸°í™”
        function initializePageContainer() {
            const container = document.getElementById('pageContainer');
            container.innerHTML = '';
            
            pages.forEach(page => {
                const pageDiv = document.createElement('div');
                pageDiv.id = page.id;
                pageDiv.className = 'page-preview';
                pageDiv.innerHTML = `
                    <div class="page-header">
                        <span>${page.title} (${page.id})</span>
                        <span>íƒ€ì…: ${page.type}</span>
                    </div>
                    <div class="page-content" id="content-${page.id}">
                        <div class="loading-placeholder" style="
                            display: flex; 
                            align-items: center; 
                            justify-content: center; 
                            height: 100%; 
                            color: #666;
                            font-size: 18px;
                        ">
                            ğŸ“„ í˜ì´ì§€ë¥¼ ë¡œë“œí•˜ë ¤ë©´ 'ëª¨ë“  í˜ì´ì§€ ë¡œë“œ' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”
                        </div>
                    </div>
                `;
                container.appendChild(pageDiv);
            });
        }

        // ê°œë³„ í˜ì´ì§€ ë¡œë“œ
        async function loadPage(pageId) {
            console.log(`ğŸ”„ í˜ì´ì§€ ë¡œë“œ ì¤‘: ${pageId}`);
            
            const contentEl = document.getElementById(`content-${pageId}`);
            if (!contentEl) return;

            try {
                // ë¡œë”© ìƒíƒœ í‘œì‹œ
                contentEl.innerHTML = `
                    <div style="
                        display: flex; 
                        align-items: center; 
                        justify-content: center; 
                        height: 100%; 
                        color: #18306c;
                        font-size: 16px;
                    ">
                        â³ ${pageId} ë¡œë”© ì¤‘...
                    </div>
                `;

                // screens ê°ì²´ í™•ì¸
                if (!window.screens) {
                    throw new Error('screens ê°ì²´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }

                const screenData = window.screens[pageId];
                if (!screenData) {
                    throw new Error(`${pageId} í™”ë©´ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤`);
                }

                // í™ˆ í™”ë©´ íŠ¹ë³„ ì²˜ë¦¬
                if (pageId === 'home') {
                    contentEl.innerHTML = `
                        <div class="screen-container home-screen">
                            ${generateHomeContent()}
                        </div>
                    `;
                } else {
                    contentEl.innerHTML = `
                        <div class="screen-container">
                            ${screenData.content}
                        </div>
                    `;
                }

                loadedPages.add(pageId);
                console.log(`âœ… í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ: ${pageId}`);

                // ì´ë¯¸ì§€ ì—ëŸ¬ ì²˜ë¦¬
                const images = contentEl.querySelectorAll('img');
                images.forEach(img => {
                    img.onerror = () => {
                        console.warn(`ğŸ–¼ï¸ ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨: ${img.src}`);
                        img.style.display = 'none';
                    };
                });

            } catch (error) {
                console.error(`âŒ í˜ì´ì§€ ë¡œë“œ ì‹¤íŒ¨: ${pageId}`, error);
                contentEl.innerHTML = `
                    <div class="error-message">
                        âŒ í˜ì´ì§€ ë¡œë“œ ì‹¤íŒ¨: ${pageId}<br>
                        ì˜¤ë¥˜: ${error.message}
                    </div>
                `;
            }
        }

        // í™ˆ í™”ë©´ ì½˜í…ì¸  ìƒì„±
        function generateHomeContent() {
            const videoSources = window.VIDEO_SOURCES || [];
            const startVideo = videoSources[0] || '';

            return `
                <div class="home-content" style="position: relative; width: 100%; height: 100%; overflow: hidden;">
                    <div class="home-video-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; background: linear-gradient(135deg, #4CAF50 0%, #2E7D32 100%);">
                        ${startVideo ? `
                            <video 
                                src="${startVideo}"
                                style="width: 100%; height: 100%; object-fit: cover;"
                                muted 
                                loop>
                            </video>
                        ` : ''}
                    </div>
                    <div class="home-overlay" style="position: relative; z-index: 5;">
                        <img
                            class="home-logo"
                            src="assets/pics/dunlopillo_logo_white.png"
                            style="position: absolute; width: 707px; height: 157px; top: 289px; left: 287px; object-fit: cover; z-index: 6;"
                            alt="Dunlopillo Logo"
                        />
                        <div class="motion-bed" style="z-index: 6;">MOTION BED</div>
                        <div class="buttons home-start-button" style="z-index: 6; cursor: pointer;">
                            <div class="label">í™”ë©´ì„ í„°ì¹˜í•˜ì‹œë©´ ì²´í—˜ì´ ì‹œì‘ë©ë‹ˆë‹¤</div>
                        </div>
                    </div>
                </div>
            `;
        }

        // ëª¨ë“  í˜ì´ì§€ ë¡œë“œ
        async function loadAllPages() {
            if (currentlyLoading) return;
            
            currentlyLoading = true;
            updateStatus('â³ ëª¨ë“  í˜ì´ì§€ ë¡œë”© ì¤‘...');

            try {
                for (let i = 0; i < pages.length; i++) {
                    const page = pages[i];
                    updateStatus(`â³ ë¡œë”© ì¤‘... (${i + 1}/${pages.length}) ${page.title}`);
                    await loadPage(page.id);
                    
                    // ë„ˆë¬´ ë¹ ë¥¸ ë¡œë”© ë°©ì§€ (UI í”¼ë“œë°±ìš©)
                    await new Promise(resolve => setTimeout(resolve, 100));
                }

                updateStatus(`âœ… ëª¨ë“  í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ (${loadedPages.size}/${pages.length})`);
            } catch (error) {
                console.error('âŒ í˜ì´ì§€ ë¡œë”© ì˜¤ë¥˜:', error);
                updateStatus('âŒ ë¡œë”© ì¤‘ ì˜¤ë¥˜ ë°œìƒ', true);
            } finally {
                currentlyLoading = false;
            }
        }

        // í˜ì´ì§€ ì´ˆê¸°í™”
        function clearAllPages() {
            loadedPages.clear();
            initializePageContainer();
            updateStatus('ğŸ—‘ï¸ í˜ì´ì§€ ì´ˆê¸°í™” ì™„ë£Œ');
        }

        // ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸
        function testInteractions() {
            updateStatus('âš¡ ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸ ì‹œì‘');
            
            // ë³„ì  ë²„íŠ¼ í…ŒìŠ¤íŠ¸
            const ratingButtons = document.querySelectorAll('.page5-star-item');
            ratingButtons.forEach((btn, index) => {
                setTimeout(() => {
                    btn.style.transform = 'scale(1.1)';
                    btn.style.transition = 'transform 0.2s';
                    setTimeout(() => {
                        btn.style.transform = 'scale(1)';
                    }, 200);
                }, index * 100);
            });

            // ì„¤ë¬¸ ë²„íŠ¼ í…ŒìŠ¤íŠ¸
            const surveyButtons = document.querySelectorAll('.page1-content .view, .page1-content .label-wrapper');
            surveyButtons.forEach((btn, index) => {
                setTimeout(() => {
                    btn.style.boxShadow = '0 0 10px rgba(24, 48, 108, 0.5)';
                    btn.style.transition = 'box-shadow 0.3s';
                    setTimeout(() => {
                        btn.style.boxShadow = '';
                    }, 300);
                }, index * 50);
            });

            setTimeout(() => {
                updateStatus('âœ… ìƒí˜¸ì‘ìš© í…ŒìŠ¤íŠ¸ ì™„ë£Œ');
            }, 2000);
        }

        // ìŠ¤í¬ë¦°ìƒ· ë‚´ë³´ë‚´ê¸° (ì‹œë®¬ë ˆì´ì…˜)
        function exportScreenshots() {
            updateStatus('ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· ì¤€ë¹„ ì¤‘...');
            
            setTimeout(() => {
                const loadedCount = loadedPages.size;
                updateStatus(`ğŸ“¸ ${loadedCount}ê°œ í˜ì´ì§€ ìŠ¤í¬ë¦°ìƒ· ì¤€ë¹„ ì™„ë£Œ`);
                
                // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” html2canvas ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                console.log('ğŸ“¸ ìŠ¤í¬ë¦°ìƒ· ë‚´ë³´ë‚´ê¸°:', Array.from(loadedPages));
            }, 1000);
        }

        // ë„¤ë¹„ê²Œì´ì…˜ ì²˜ë¦¬
        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    // í™œì„± ìƒíƒœ ì—…ë°ì´íŠ¸
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                    
                    // í•´ë‹¹ í˜ì´ì§€ë¡œ ìŠ¤í¬ë¡¤
                    const pageId = item.dataset.page;
                    const pageEl = document.getElementById(pageId);
                    if (pageEl) {
                        pageEl.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                    }
                });
            });
        }

        // ì´ˆê¸°í™”
        function initialize() {
            console.log('ğŸš€ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì´ˆê¸°í™”');
            
            // screens ê°ì²´ í™•ì¸ ëŒ€ê¸°
            const checkScreens = () => {
                if (window.screens) {
                    console.log('âœ… screens ê°ì²´ ë°œê²¬:', Object.keys(window.screens));
                    initializePageContainer();
                    setupNavigation();
                    updateStatus('âœ… ì´ˆê¸°í™” ì™„ë£Œ - ìë™ìœ¼ë¡œ ëª¨ë“  í˜ì´ì§€ë¥¼ ë¡œë“œí•©ë‹ˆë‹¤');
                    
                    // ìë™ìœ¼ë¡œ ëª¨ë“  í˜ì´ì§€ ë¡œë“œ ì‹œì‘ (1ì´ˆ í›„)
                    setTimeout(() => {
                        loadAllPages();
                    }, 1000);
                } else {
                    console.log('â³ screens ê°ì²´ ëŒ€ê¸° ì¤‘...');
                    setTimeout(checkScreens, 500);
                }
            };
            
            checkScreens();
        }

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initialize);
        } else {
            initialize();
        }

        console.log('ğŸ§ª í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
    </script>
</body>
</html>
