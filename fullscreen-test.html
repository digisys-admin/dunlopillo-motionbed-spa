<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Chrome Fullscreen Test</title>
    <style>
        body, html {
            margin: 0 !important;
            padding: 0 !important;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #ff0000; /* 빨간색으로 여백 확인 */
            font-family: Arial, sans-serif;
        }
        
        .container {
            width: 100vw;
            height: 100vh;
            background: #0066cc;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        
        .test-button {
            padding: 20px 40px;
            font-size: 18px;
            background: #ffffff;
            color: #000;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
        }
        
        .status {
            margin: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            font-size: 16px;
        }
        
        /* 크롬 전용 풀스크린 스타일 */
        :-webkit-full-screen {
            width: 100vw !important;
            height: 100vh !important;
            margin: 0 !important;
            padding: 0 !important;
            background: #00ff00 !important; /* 풀스크린 시 초록색 */
        }
        
        :-webkit-full-screen body {
            margin: 0 !important;
            padding: 0 !important;
            background: #00ff00 !important;
        }
        
        :-webkit-full-screen .container {
            background: #ff6600 !important; /* 풀스크린 시 주황색 */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔍 Chrome Fullscreen API 테스트</h1>
        
        <div class="status" id="status">
            브라우저: <span id="browser-info"></span><br>
            풀스크린 지원: <span id="fullscreen-support"></span><br>
            현재 상태: <span id="current-status">일반 모드</span><br>
            화면 크기: <span id="screen-size"></span><br>
            뷰포트 크기: <span id="viewport-size"></span>
        </div>
        
        <button class="test-button" onclick="testFullscreen()">
            🖥️ 풀스크린 테스트
        </button>
        
        <button class="test-button" onclick="exitFullscreen()">
            ❌ 풀스크린 해제
        </button>
        
        <button class="test-button" onclick="checkLimitations()">
            ⚠️ 브라우저 제한사항 확인
        </button>
        
        <div class="status" id="test-results"></div>
    </div>

    <script>
        // 브라우저 정보 감지
        function detectBrowser() {
            const userAgent = navigator.userAgent;
            if (userAgent.includes('Chrome') && !userAgent.includes('Edg')) {
                return `Chrome ${getChromiumVersion(userAgent)}`;
            } else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) {
                return 'Safari';
            } else if (userAgent.includes('Firefox')) {
                return 'Firefox';
            } else if (userAgent.includes('Edg')) {
                return 'Edge';
            }
            return 'Unknown';
        }
        
        function getChromiumVersion(userAgent) {
            const match = userAgent.match(/Chrome\/(\d+)/);
            return match ? match[1] : 'Unknown';
        }
        
        // 풀스크린 지원 확인
        function checkFullscreenSupport() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) return 'Standard API ✅';
            if (elem.webkitRequestFullscreen) return 'WebKit API ✅';
            if (elem.mozRequestFullScreen) return 'Mozilla API ✅';
            if (elem.msRequestFullscreen) return 'MS API ✅';
            return 'Not Supported ❌';
        }
        
        // 화면 정보 업데이트
        function updateScreenInfo() {
            document.getElementById('screen-size').textContent = 
                `${screen.width}x${screen.height}`;
            document.getElementById('viewport-size').textContent = 
                `${window.innerWidth}x${window.innerHeight}`;
        }
        
        // 풀스크린 상태 감지
        function updateFullscreenStatus() {
            const isFullscreen = !!(document.fullscreenElement || 
                                   document.webkitFullscreenElement);
            document.getElementById('current-status').textContent = 
                isFullscreen ? '🖥️ 풀스크린 모드' : '📱 일반 모드';
            
            // 배경색으로 상태 확인
            if (isFullscreen) {
                document.body.style.background = '#00ff00'; // 초록색 = 풀스크린
            } else {
                document.body.style.background = '#ff0000'; // 빨간색 = 일반 모드
            }
            
            updateScreenInfo();
        }
        
        // 풀스크린 테스트
        function testFullscreen() {
            const elem = document.documentElement;
            
            if (document.fullscreenElement || document.webkitFullscreenElement) {
                alert('이미 풀스크린 모드입니다!');
                return;
            }
            
            // 크롬에서 가장 호환성이 좋은 방법
            if (elem.requestFullscreen) {
                elem.requestFullscreen({ navigationUI: "hide" }).then(() => {
                    console.log('✅ Standard Fullscreen API 성공');
                    logTestResult('Standard Fullscreen API', '성공', 'green');
                }).catch(err => {
                    console.error('❌ Standard Fullscreen API 실패:', err);
                    logTestResult('Standard Fullscreen API', `실패: ${err.message}`, 'red');
                });
            } else if (elem.webkitRequestFullscreen) {
                elem.webkitRequestFullscreen();
                console.log('✅ WebKit Fullscreen API 사용');
                logTestResult('WebKit Fullscreen API', '사용됨', 'orange');
            } else {
                alert('❌ 이 브라우저는 풀스크린을 지원하지 않습니다!');
                logTestResult('Fullscreen Support', '지원하지 않음', 'red');
            }
        }
        
        // 풀스크린 해제
        function exitFullscreen() {
            if (document.exitFullscreen) {
                document.exitFullscreen();
            } else if (document.webkitExitFullscreen) {
                document.webkitExitFullscreen();
            } else {
                alert('풀스크린 해제 불가능');
            }
        }
        
        // 브라우저 제한사항 확인
        function checkLimitations() {
            const results = [];
            
            // 1. 사용자 상호작용 필요성
            results.push('🔒 사용자 상호작용: 필수 (버튼 클릭으로만 가능)');
            
            // 2. 크롬 버전별 차이
            const chromeVersion = getChromiumVersion(navigator.userAgent);
            if (chromeVersion !== 'Unknown') {
                const versionNum = parseInt(chromeVersion);
                if (versionNum >= 71) {
                    results.push('✅ Chrome 71+: navigationUI 옵션 지원');
                } else {
                    results.push('⚠️ Chrome 70 이하: 제한된 풀스크린');
                }
            }
            
            // 3. HTTPS 요구사항
            const isHTTPS = location.protocol === 'https:';
            const isLocalhost = location.hostname === 'localhost' || location.hostname === '127.0.0.1';
            results.push(`🔐 HTTPS: ${isHTTPS || isLocalhost ? '✅ 안전' : '❌ 필요'}`);
            
            // 4. 모바일 제한사항
            const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            results.push(`📱 모바일: ${isMobile ? '⚠️ 제한적 지원' : '✅ 완전 지원'}`);
            
            // 5. 키오스크 모드 가능성
            results.push('🖥️ 키오스크 모드: Chrome --kiosk 플래그로만 완전 지원');
            results.push('⚠️ 웹 풀스크린: 주소표시줄 등 UI 일부 남을 수 있음');
            
            document.getElementById('test-results').innerHTML = 
                '<h3>🔍 제한사항 분석:</h3>' + 
                results.map(r => `<div style="margin: 5px 0;">${r}</div>`).join('');
        }
        
        // 테스트 결과 로깅
        function logTestResult(test, result, color) {
            const resultDiv = document.getElementById('test-results');
            const newResult = document.createElement('div');
            newResult.style.color = color;
            newResult.style.margin = '5px 0';
            newResult.textContent = `${test}: ${result}`;
            resultDiv.appendChild(newResult);
        }
        
        // 이벤트 리스너
        document.addEventListener('fullscreenchange', updateFullscreenStatus);
        document.addEventListener('webkitfullscreenchange', updateFullscreenStatus);
        
        // 페이지 로드 시 정보 업데이트
        window.addEventListener('load', () => {
            document.getElementById('browser-info').textContent = detectBrowser();
            document.getElementById('fullscreen-support').textContent = checkFullscreenSupport();
            updateScreenInfo();
            updateFullscreenStatus();
            
            // 5초 후 자동으로 제한사항 확인
            setTimeout(checkLimitations, 2000);
        });
        
        // 창 크기 변경 시 정보 업데이트
        window.addEventListener('resize', updateScreenInfo);
    </script>
</body>
</html>
